[logic]
active = ph_door@locked

[ph_door@closed]
closed = true
locked = false
on_use = ph_door@open
snd_open_start = metal_small_open_start
snd_close_start = metal_small_close_start
snd_close_stop = metal_small_close_stop
 
[ph_door@open]
closed = false
locked = false
on_use = ph_door@closed
snd_open_start = metal_small_open_start
snd_close_start = metal_small_close_start
snd_close_stop = metal_small_close_stop

[ph_door@locked]
closed = true
locked = true
snd_open_start = metal_small_open_start
snd_close_start = metal_small_close_start
snd_close_stop = metal_small_close_stop
on_info = {=actor_has_item(bunkers_door_key) +found_docs +esc_main_quest_end} ph_door@wait_for_opening

[ph_door@wait_for_opening]
closed = true
locked = true
snd_open_start = metal_small_open_start
snd_close_start = metal_small_close_start
snd_close_stop = metal_small_close_stop
on_info = {!actor_has_item(bunkers_door_key)} ph_door@locked
on_use = %=remove_item(bunkers_door_key) +find_exit% ph_door@closed